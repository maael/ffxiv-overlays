{"version":3,"file":"static/webpack/static/development/pages/t/base.js.b53fd6ffd1f75e50da5a.hot-update.js","sources":["webpack:///./util/simulator.ts"],"sourcesContent":["import {createCombatants} from './createCombatant';\nimport createEncounter from './createEncounter';\nimport {randomBetween} from './random';\n\nconst OVERLAY_EVENT = 'onOverlayDataUpdate';\n\nconst START_TIME = Date.now();\n\nfunction millisToMinutesAndSeconds(millis: number) {\n  const minutes = Math.floor(millis / 60000);\n  const seconds = Number(((millis % 60000) / 1000).toFixed(0));\n  return minutes + \":\" + (seconds < 10 ? '0' : '') + seconds;\n}\n\nfunction getEvent() {\n  return {\n    Encounter: createEncounter(),\n    Combatant: createCombatants(8),\n    isActive: true\n  }\n}\n\nfunction updateEvent(e: any) {\n  const duration_ms = Date.now() - START_TIME;\n  const duration = millisToMinutesAndSeconds(duration_ms);\n  e.detail.Encounter.damage = 0;\n  e.detail.Encounter.duration = duration;\n  e.detail.Encounter.DURATION = duration_ms;\n  Object.keys(e.detail.Combatant).forEach((k) => {\n    e.detail.Combatant[k].duration = duration;\n    e.detail.Combatant[k].DURATION = duration_ms;\n    e.detail.Combatant[k].damage = randomBetween(2000, 9000);\n    e.detail.Encounter.damage += e.detail.Combatant[k].damage;\n  })\n  return e.detail;\n}\n\nexport default (ms: number = 3000) => {\n  const baseEvent = new CustomEvent(OVERLAY_EVENT, {detail: getEvent()})\n  document.dispatchEvent(baseEvent);\n  console.info('displatch:start', baseEvent.detail);\n  setInterval(() => {\n    const e = new CustomEvent(OVERLAY_EVENT, {detail: updateEvent(baseEvent)})\n    document.dispatchEvent(e);\n    if (window.location.search.includes('debug')) console.info('dispatch:update', e.detail);\n  }, ms);\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}