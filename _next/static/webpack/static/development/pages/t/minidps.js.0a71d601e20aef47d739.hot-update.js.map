{"version":3,"file":"static/webpack/static/development/pages/t/minidps.js.0a71d601e20aef47d739.hot-update.js","sources":["webpack:///./util/simulator.ts"],"sourcesContent":["import {createCombatants} from './createCombatant';\nimport createEncounter from './createEncounter';\nimport {randomBetween} from './random';\nimport {JobAbbreviations} from './types';\n\nconst OVERLAY_EVENT = 'onOverlayDataUpdate';\n\nconst START_TIME = Date.now();\n\nfunction millisToMinutesAndSeconds(millis: number) {\n  const minutes = Math.floor(millis / 60000);\n  const seconds = Number(((millis % 60000) / 1000).toFixed(0));\n  return minutes + \":\" + (seconds < 10 ? '0' : '') + seconds;\n}\n\nfunction getEvent() {\n  return {\n    Encounter: createEncounter(),\n    Combatant: createCombatants(8),\n    isActive: true\n  }\n}\n\nfunction updateEvent(e: any) {\n  const duration_ms = Date.now() - START_TIME;\n  const duration = millisToMinutesAndSeconds(duration_ms);\n  e.detail.Encounter.damage = 0;\n  e.detail.Encounter.duration = duration;\n  e.detail.Encounter.DURATION = duration_ms;\n  Object.keys(e.detail.Combatant).forEach((k, i) => {\n    const randomJob = JobAbbreviations[Object.values(JobAbbreviations)[Math.floor(Math.random() * Object.values(JobAbbreviations).length)]];\n    e.detail.Combatant[k].Job = randomJob;\n    e.detail.Combatant[k].name = i === 0 ? 'YOU' : `${randomJob} ${i}`;\n    e.detail.Combatant[k].duration = duration;\n    e.detail.Combatant[k].DURATION = duration_ms;\n    e.detail.Combatant[k].damage = randomBetween(2000, 9000);\n    e.detail.Combatant[k].DPS = randomBetween(2000, 9000);\n    e.detail.Combatant[k].encdps = randomBetween(2000, 9000);\n    e.detail.Encounter.damage += e.detail.Combatant[k].damage;\n    e.detail.Encounter.dps += e.detail.Combatant[k].dps;\n    e.detail.Encounter.encdps += e.detail.Combatant[k].encdps;\n  });\n  e.detail.Combatant = Object.entries(e.detail.Combatant).sort(([_k1, v1]: any, [_k2, v2]: any) => Number(v2.encdps) - Number(v1.encdps)).reduce((obj, [k, v]) => ({\n    ...obj,\n    [k]: v\n  }), {});\n  return e.detail;\n}\n\nexport default (ms: number = 3000) => {\n  const baseEvent = new CustomEvent(OVERLAY_EVENT, {detail: getEvent()})\n  document.dispatchEvent(baseEvent);\n  if (window.location.search.includes('debug')) console.info('displatch:start', baseEvent.detail);\n  return setInterval(() => {\n    const e = new CustomEvent(OVERLAY_EVENT, {detail: updateEvent(baseEvent)})\n    document.dispatchEvent(e);\n    if (window.location.search.includes('debug')) console.info('dispatch:update', e.detail);\n  }, ms);\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAIA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}